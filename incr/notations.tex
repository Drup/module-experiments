\newcommand\htag[1]{\shortintertext{\textbf{#1}}}
\newcommand\ddotop{\operatorname{:}}
\newcommand\Multi[2][{}]{\overline{#2}}
\newcommand\rg[2]{\left[#1;#2\right]}

%% Term
\newcommand\im{M}
\newcommand\iv{V}
\newcommand\is{S}
\newcommand\id{D}
\newcommand\ip{P}
\newcommand\ix{X}
\newcommand\iy{Y}

%% Types
\newcommand\iM{\mathcal M}
\newcommand\iMO{{\mathcal M^\circ}}
\newcommand\iS{\mathcal S}
\newcommand\iD{\mathcal D}
\newcommand\iX{\mathcal X}
\newcommand\iC{\mathcal C}
\newcommand\iP{\mathcal P}

%% Syntax
\newcommand\Sapp[2]{#1(#2)}
\newcommand\Sconstraint[2]{(#1 \ddotop #2)}
\newcommand\Stransp[2]{(#1 \operatorname{<:} #2)}
\newcommand\Sfunctor[3]{\Sconstraint{#1}{#2} \to #3}
\newcommand\Salias[1]{(= #1)}
\newcommand\Swith[2]{#1\ \mathtt{with}\ #2}

\newcommand\Sstruct[2]{\mathtt{struct}_{#1}\ #2\ \mathtt{end}}
\newcommand\Ssig[2]{\mathtt{sig}_{#1}\ #2\ \mathtt{end}}
\newcommand\Sempty\varepsilon

\newcommand\Senrich[2]{{#2}_{\color{black}\left[#1\right]}}
\newcommand\Sstrengthen[3]{#3/#2}
\newcommand\Ssubst[2]{\mathtt{let}\ #1\ \mathtt{in}\ #2}

\newcommand\Slet[2]{\mathtt{let}\ #1 = #2}
\newcommand\Sval[2]{\mathtt{val}\ #1 : #2}
\newcommand\Stype[2]{\mathtt{type}\ #1 = #2}
\newcommand\Stypeabs[1]{\mathtt{type}\ #1}
\newcommand\Smodule[2]{\mathtt{module}\ #1 = #2}
\newcommand\Smodulety[2]{\mathtt{module}\ #1 : #2}
\newcommand\Smoduletype[2]{\mathtt{module\ type}\ #1 = #2}

%% Env
\newcommand\E{\Gamma}
\newcommand\lookup[2]{#1(#2)}
\newcommand\resolve[2]{\operatorname{resolve}_{#1}(#2)}


\newcommand\subst[3]{#3\!\left[#1 \mapsto #2\right]}
\newcommand\substs[4]{#4\!\left[#1 \mapsto #2\ \middle|\ #1\in#3\right]}
\newcommand\bv[1]{\operatorname{BV}(#1)}

%% Jugements

\newcommand\iswt{\operatorname{\vdash}}
\newcommand\iswtm{\operatorname{\vdash}}
\newcommand\wt[4][]{#2 \iswt_{#1} #3 \ddotop #4}
\newcommand\wtp[3]{#1 \iswtm #2 \ddotop #3}
\newcommand\wtm[4][]{#2 \iswtm_{#1} #3 \ddotop #4}

% Operation
\newcommand\opeq[3]{#1 \iswtm #2 = #3}
\newcommand\Oenrich[4]{\opeq{#1}{\Senrich{#2}{#3}}{#4}}
\newcommand\Ostrengthen[4]{\opeq{#1}{\Sstrengthen{#2}{#3}}{#4}}
\newcommand\Osubst[4]{\opeq{#1}{\Ssubst{#2}{#3}}{#4}}

\newcommand\Oforce[2]{\operatorname{force}_{#1}(#2)}
\newcommand\Oshape[2]{\operatorname{shape}_{#1}(#2)}
\newcommand\Onormalize[2]{\operatorname{normalize}_{#1}(#2)}

% Welformedness of types and terms
\newcommand\iswf{\operatorname{\vDash}}
\newcommand\wf[3][]{#2 \iswf_{#1} #3}
\newcommand\wfp[2]{#1 \iswf #2}
\newcommand\wfm[3][]{#2 \iswf_{#1} #3}

% Module inclusion
\newcommand\issub{<:}
\newcommand\subtyp[3]{#1 \iswt #2 \issub #3}
\newcommand\submod[4]{#1 \iswtm #2 \issub #3 \leadsto #4}
\newcommand\subpath[4][]{#2 \iswtm_{#1} #3 \lesssim #4}
\newcommand\eqpath[4][]{#2 \iswtm_{#1} #3 = #4}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main.tex"
%%% End:
