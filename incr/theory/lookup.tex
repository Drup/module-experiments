\begin{mathpar}
  \inferrule
  { (\Smodulety{\ix}{\iM}) \in \E }
  { \lookup{\E}{\ix} = \iM }
  \and
  \inferrule
  { \Oshape{\E}{\lookup{\E}{\iP}} = \Ssig{\iy}{\iS_1; \Smodulety{\ix}{\iM}; \iS_2} }
  { \lookup{\E}{\iP.\ix} = \subst{\iy}{\iP}{\iM} }
  \\
  \inferrule
  { (\Smoduletype{\iX}{\iM}) \in \E }
  { \lookup{\E}{\iX} = \iM }
  \and
  \inferrule
  { \Oshape{\E}{\lookup{\E}{\iP}} =
    \Ssig{\iy}{\iS_1; \Smoduletype{\iX}{\iM}; \iS_2} }
  { \lookup{\E}{\iP.\iX} = \subst{\iy}{\iP}{\iM} }
  \and
  \inferrule
  { \lookup{\E}{\iP} = \iM \\
    \submod{\E}{\iM}{\iM'}{\iM_r}
  }
  { \lookup{\E}{\Stransp{\iP}{\iM'}} = \iM_r }
  \and
  \inferrule
  { \Oshape{\E}{\lookup{\E}{\iP_f}} = \Sfunctor{\ix}{\iM_a}{\iM_r} \\
    \submod{\E}{\Salias{\iP_a}}{\iM_a}{\iM}
  }
  { \lookup{\E}{\Sapp{\iP_f}{\iP_a}} =
    {\Ssubst{\iy : \iM}{\subst{\ix}{\iy}{\iM_r}}} }
\end{mathpar}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../main"
%%% End:
